const editorConfig={toolbar:["heading","|","bold","italic","bulletedList","numberedList","blockQuote"]};let currentEditPostElement,currentEditingPost,editEditor;ClassicEditor.create(document.querySelector("#createEditor"),editorConfig).then(()=>{const e=document.querySelector("#createPostArea");null!=e&&(e.style.display="block")}).catch(e=>{console.error(e)});const cancelEditBtn=document.querySelector("#cancelEditBtn");null!=cancelEditBtn&&(ClassicEditor.create(document.querySelector("#editEditor"),editorConfig).then(e=>{editEditor=e,document.querySelector("#createPostArea").style.display="block"}).catch(e=>{console.error(e)}),cancelEditBtn.addEventListener("click",cancelEdit),document.querySelector("#editPostBtn").addEventListener("click",function(){fetch("/api/posts/"+currentEditingPost,{method:"PUT",body:editEditor.getData()}).then(e=>{200===e.status?window.location.reload():alert("Ett fel uppstod!")})}));const removeThreadBtn=document.querySelector("#removeThreadBtn");async function deleteThread(){(await fetch("/api/threads/"+removeThreadBtn.dataset.threadId,{method:"delete"})).ok?window.location.href="/boards/"+removeThreadBtn.dataset.boardId:alert("Ett fel uppstod!")}function cancelEdit(){currentEditPostElement.style.backgroundColor="white",currentEditPostElement.querySelector(".postData").style.display="block",currentEditPostElement=null;const e=document.querySelector("#editPostArea");e.style.display="none",document.querySelector("body").appendChild(e)}null!=removeThreadBtn&&removeThreadBtn.addEventListener("click",deleteThread);for(const e of document.querySelectorAll(".deletePostButton"))e.addEventListener("click",function(){fetch("/api/posts/"+e.dataset.postId,{method:"DELETE"}).then(e=>{e.ok?window.location.reload():alert("Ett fel uppstod!")})});for(const e of document.querySelectorAll(".updatePostButton"))e.addEventListener("click",function(){null!=currentEditPostElement&&cancelEdit();const t=e.parentElement.parentElement.parentElement;t.scrollIntoView(),t.style.backgroundColor="orange",t.querySelector(".postData").style.display="none",editEditor.setData(t.querySelector(".postContent").innerHTML);const o=document.querySelector("#editPostArea");o.style.display="block",t.appendChild(o),currentEditingPost=e.dataset.postId,currentEditPostElement=t});